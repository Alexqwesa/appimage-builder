version: 1
script:
  - mkdir -p AppDir
  - cp -f main.qml AppDir/

AppDir:
  path: ./AppDir
  exec: usr/lib/x86_64-linux-gnu/qt5/bin/qmlscene
  exec_args: $@ ${APPDIR}/main.qml

  info:
    id: org.qt.qmlscene
    name: qmlscene
    icon: text-x-qml
    version: 19.08.02

  dpkg:
    include:
      - qmlscene
      # minimal graphics stack
      - libglu1-mesa
      - libgl1-mesa-glx
      - libgl1-mesa-dri
      - freeglut3
      # minimal font stack
      - fontconfig
      - fonts-dejavu-core
      - ttf-bitstream-vera
    exclude:
      - coreutils
      - dpkg
      - debconf
      - qtchooser
      - sensible-utils
      - ucf

  test:
    centos:
      image: centos:6
      command: "./AppRun main.qml"
      use_host_x: True
    debian:
      image: debian:stable
      command: "./AppRun $@ main.qml"
      use_host_x: True
    arch:
      image: archlinux
      command: "./AppRun main.qml"
      use_host_x: True
    fedora:
      image: fedora:26
      command: "./AppRun main.qml"
      use_host_x: True
    ubuntu:
      image: ubuntu:xenial
      command: "./AppRun main.qml"
      use_host_x: True


AppImage:
  update-information: None
  sign-key: None
